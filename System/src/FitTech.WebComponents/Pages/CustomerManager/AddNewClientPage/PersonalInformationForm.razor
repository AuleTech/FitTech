@using FitTech.WebComponents.Pages.CustomerManager.CustomerManagerModels;

<EditForm Model="Model" OnSubmit="Submit" FormName="CostumerForm">
            <div class="mb-4">
                <label for="firstName" class="mb-2 block text-sm font-bold text-gray-700 dark:text-gray-300">Nombre</label>
                <InputText type="text" @bind-Value="Model!.NameUser" id="firstName" class="w-full rounded border border-gray-300 bg-gray-100 px-3 py-2 text-black focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-white"/>
            </div>
            <div class="mb-4">
                <label for="lastName" class="mb-2 block text-sm font-bold text-gray-700 dark:text-gray-300">Apellidos</label>
                <InputText type="text" @bind-Value="Model!.LastNameuser" id="lastName" class="w-full rounded border border-gray-300 bg-gray-100 px-3 py-2 text-black focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-white"/>
            </div>
            <div class="mb-4">
                <label for="birthday" class="mb-2 block text-sm font-bold text-gray-700 dark:text-gray-300">Fecha de Nacimiento</label>
                <InputDate  @bind-Value="Model!.Birthdate" id="birthday" class="w-full rounded border border-gray-300 bg-gray-100 px-3 py-2 text-black focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-white"/>
            </div>
            <div class="mb-4">
                <label for="phonenumber" class="mb-2 block text-sm font-bold text-gray-700 dark:text-gray-300">Teléfono</label>
                <InputNumber type="text" @bind-Value="Model!.PhoneNumber" id="phonenumber" class="w-full rounded border border-gray-300 bg-gray-100 px-3 py-2 text-black focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-white"/>
            </div>
            <div class="mb-4">
                <label for="subscriptiontype" class="mb-2 block text-sm font-bold text-gray-700 dark:text-gray-300">Tipo de Subscripción</label>
                <InputSelect type="text" @bind-Value="Model.SubscriptionType" TValue="string" id="subscriptiontype" class="w-full rounded border border-gray-300 bg-gray-100 px-3 py-2 text-black focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-white">
                    <option value="Selecciona un tipo de Subscripción">Selecciona un tipo de Subscripción</option>
                    <option value="Pérdida de Peso">Pérdida de Peso</option>
                    <option value="Aumento de Masa Muscular">Aumento de Masa Muscular</option>
                    <option value="Mejora Rendimiento Deportivo">Mejora Rendimiento Deportivo</option>
                </InputSelect>
            </div>
        </EditForm>

@code {

    [Parameter]
    public required NewClientModel Model { get; set; }
    private decimal selectedPrice;
    private string subscriptionType = "";
    
    protected override void OnInitialized()
    {
       Model ??= new();
        
    }
    
    public string SubscriptionType
    {
        get => subscriptionType;
        set
        {
            if (subscriptionType != value)
            {
                subscriptionType = value;
                UpdatePriceForSubscription(value);
            }
        }
    }
    
    public decimal SelectedPrice
    {
        get => selectedPrice;
        set
        {
            if (selectedPrice != value)
            {
                selectedPrice = value;
                StateHasChanged(); 
            }
        }
    }

    private readonly Dictionary<string, decimal> SubscriptionPrices = new()
    {
        { "standar", 0m },
        { "weight", 29.99m },
        { "muscle", 39.99m },
        { "performance", 49.99m }
    };

    private void UpdatePriceForSubscription(string subscription)
    {
        if (SubscriptionPrices.TryGetValue(subscription, out var price))
        {
            SelectedPrice = price;
        }
        else
        {
            SelectedPrice = 0m;
        }
    }
    
    public static void  Submit()
    {
       
    }

    
}